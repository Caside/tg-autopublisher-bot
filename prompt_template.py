"""
Этот файл содержит шаблон промпта для генерации постов с помощью DeepSeek API.
Вы можете изменить его в соответствии с вашими потребностями.
"""

import random
from themes import POST_THEMES

# Список форматов для постов
POST_FORMATS = [
    "абсурдный диалог",
    "письмо из будущего",
    "инструктаж для выжившего",
    "переписка с самим собой",
    "воспоминание о том, чего не было",
    "уличный монолог",
    "гипнотический фрагмент",
    "перевод с языка внутреннего зверя",
    "сновидческая заметка",
    "инфопоэма",
    "археология мысли",
    "эмоциональный рапорт",
    "внутренний манифест",
    "фрагмент интервью с отсутствующим",
    "драматическая ремарка",
    "микро-ритуал",
    "расшифровка сновидения",
    "хроника будущего ритуала",
    "когнитивная сценка",
    "невозможный отзыв на несуществующую книгу"
]

# Список вариантов завершения постов (без призывов к комментированию)
POST_ENDINGS = [
    "погрузи в тишину",
    "оставь читателя на краю",
    "обруби мысль на пике",
    "преврати вывод в эхо",
    "заставь ощутить дрожь",
    "разруш логическую цепь",
    "заверши абсурдом",
    "выскажи невозможное",
    "погаси свет",
    "искажи время",
    "предложи шепот вместо вывода",
    "оставь пустоту",
    "закончи с намеком",
    "разрежь мысль на части",
    "отправь читателя в лабиринт",
    "представь, что ты исчез",
    "прерви повествование",
    "дай понять, что всё уже произошло",
    "обратись напрямую к подсознанию",
    "испарись"
]

def generate_random_seed():
    """Генерирует случайное число для уникализации промпта."""
    return random.randint(1000, 9999)

# Шаблон для генерации постов
DEEPSEEK_PROMPT = """
Сгенерируй оригинальный авторский пост для телеграм-канала на основе следующих параметров:
Тема: {theme}  
Формат подачи: {format}

Важно:
- Придумай выразительный, образный заголовок, отражающий настроение и суть поста
- Не используй тему или формат дословно в заголовке
- Заголовок должен вызывать интерес, интригу или эмоциональный отклик

Важные инструкции:
- Стиль: образный, многослойный, с элементами неожиданности и эмоций, но без избыточного абсурда
- Можно использовать нестандартную форму подачи (например, исповедь, диалог, инструкцию), но только если она усиливает смысл
- Пост должен передавать одну чёткую мысль, наблюдение или внутреннее открытие
- Используй метафоры и образы умеренно, только если они добавляют глубину, а не запутывают
- Можешь нарушать линейность, но текст должен быть читаемым и цельным
- Добавь один запоминающийся образ или контраст, не обязательно странный
- Не бойся пауз и недосказанности — но не превращай текст в ребус
- Используй HTML-форматирование для выделения текста:
  - Заголовок выделяй тегом <b>жирным</b>
  - Важные термины и ключевые моменты выделяй тегом <i>курсивом</i>
- Используй приём завершения: {ending}

Длина поста: 450-600 символов.
Случайное число для уникализации: {random_seed}

ВАЖНО: В канале ОТКЛЮЧЕНЫ комментарии, поэтому НЕ ПРИЗЫВАЙ к обсуждению, комментированию, 
и не задавай вопросы предполагающие ответ в комментариях.
"""

# Диапазоны параметров для API запроса
DEEPSEEK_API_PARAM_RANGES = {
    "temperature": (0.7, 1.0),        # Диапазон температуры для разнообразия
    "top_p": (0.9, 0.98),             # Диапазон top_p для разнообразия
    "presence_penalty": (0.5, 0.9),   # Диапазон штрафа за присутствие
    "frequency_penalty": (0.6, 1.0)   # Диапазон штрафа за частоту
}

# Базовые параметры для API запроса
DEEPSEEK_API_PARAMS = {
    "model": "deepseek-chat",  # Можно заменить на другую модель DeepSeek
    "max_tokens": 600,         # Уменьшенная максимальная длина ответа
    "stream": False,           # Не использовать потоковую передачу для ответа
}
